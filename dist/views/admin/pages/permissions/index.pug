extends ../../layouts/admin

include ../../mixins/boxTitle

block main
  +boxTitle(pageTitle)

  table.table.table-borderless
    thead
      tr
        th(scope="col") #
        each role of roles
          th(scope="col") #{role.title}
    tbody
      //- Accounts
      tr.border-top
        th(scope="row") Tài khoản
      tr
        td Xem
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="accountView"
              checked=role.permissions.includes("accountView")
            )
      tr
        td Thêm
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="accountCreate"
              checked=role.permissions.includes("accountCreate")
            )
      tr
        td Sửa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="accountUpdate"
              checked=role.permissions.includes("accountUpdate")
            )
      tr
        td Xóa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="accountDelete"
              checked=role.permissions.includes("accountDelete")
            )

      //- Roles
      tr.border-top
        th(scope="row") Vai trò
      tr
        td Xem
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="roleView"
              checked=role.permissions.includes("roleView")
            )
      tr
        td Thêm
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="roleCreate"
              checked=role.permissions.includes("roleCreate")
            )
      tr
        td Sửa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="roleUpdate"
              checked=role.permissions.includes("roleUpdate")
            )
      tr
        td Xóa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="roleDelete"
              checked=role.permissions.includes("roleDelete")
            )
      
      //- Users
      tr.border-top
        th(scope="row") Người dùng
      tr
        td Xem
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="userView"
              checked=role.permissions.includes("userView")
            )
      tr
        td Thêm
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="userCreate"
              checked=role.permissions.includes("userCreate")
            )
      tr
        td Sửa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="userUpdate"
              checked=role.permissions.includes("userUpdate")
            )
      tr
        td Xóa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="userDelete"
              checked=role.permissions.includes("userDelete")
            )

      //- RoomChats
      tr.border-top
        th(scope="row") Phòng trò chuyện
      tr
        td Xem
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="roomChatView"
              checked=role.permissions.includes("roomChatView")
            )
      tr
        td Thêm
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="roomChatCreate"
              checked=role.permissions.includes("roomChatCreate")
            )
      tr
        td Sửa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="roomChatUpdate"
              checked=role.permissions.includes("roomChatUpdate")
            )
      tr
        td Xóa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="roomChatDelete"
              checked=role.permissions.includes("roomChatDelete")
            )

      //- GroupTopics
      tr.border-top
        th(scope="row") Chủ đề cộng đồng
      tr
        td Xem
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="groupTopicView"
              checked=role.permissions.includes("groupTopicView")
            )
      tr
        td Thêm
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="groupTopicCreate"
              checked=role.permissions.includes("groupTopicCreate")
            )
      tr
        td Sửa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="groupTopicUpdate"
              checked=role.permissions.includes("groupTopicUpdate")
            )
      tr
        td Xóa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="groupTopicDelete"
              checked=role.permissions.includes("groupTopicDelete")
            )

      //- Groups
      tr.border-top
        th(scope="row") Cộng đồng
      tr
        td Xem
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="groupView"
              checked=role.permissions.includes("groupView")
            )
      tr
        td Thêm
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="groupCreate"
              checked=role.permissions.includes("groupCreate")
            )
      tr
        td Sửa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="groupUpdate"
              checked=role.permissions.includes("groupUpdate")
            )
      tr
        td Xóa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="groupDelete"
              checked=role.permissions.includes("groupDelete")
            )

      //- ArticleGroups
      tr.border-top
        th(scope="row") Bài Viết Cộng đồng
      tr
        td Xem
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="articleGroupView"
              checked=role.permissions.includes("articleGroupView")
            )
      tr
        td Thêm
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="articleGroupCreate"
              checked=role.permissions.includes("articleGroupCreate")
            )
      tr
        td Sửa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="articleGroupUpdate"
              checked=role.permissions.includes("articleGroupUpdate")
            )
      tr
        td Xóa
        each role of roles
          td
            input(
              class="form-check-input"
              type="checkbox"
              roleId=role.id
              value="articleGroupDelete"
              checked=role.permissions.includes("articleGroupDelete")
            )

  form(
    class="d-flex justify-content-center mb-3"
    method="POST"
    action=`/${admin}/permissions/update?_method=PATCH`
    roles=roles.map(role => ({id: role.id, permissions: []}))
    form-permission
  )
    button.btn.btn-primary Cập nhật